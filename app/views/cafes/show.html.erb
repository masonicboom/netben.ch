<div data-role="page" data-fullscreen="true" id="discover">

  <div data-role="header">
    <a href="/" data-icon="home">Home</a>
    <h2><%= @cafe.name %></h2>
  </div><!-- /header -->

  <div data-role="content">
    <div class="content-primary">
      <div id="map" style="width: 100%; height: 150px;"></div>

      <script type="text/javascript">

      $(document).ready(function() {
        initMap();
      });

      function initMap() {
        var latitude = <%= @cafe.latitude %>;
        var longitude = <%= @cafe.longitude %>;
        var location = new google.maps.LatLng(latitude, longitude);

        map = new google.maps.Map(document.getElementById("map"), {
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: location,
          zoom: 16,
          draggable: false,
        });

        var marker = new google.maps.Marker({
          map: map,
          position: location
        });
      }

      </script>

      <table>
        <thead>
          <tr>
            <td>Recorded</td>
            <td>SSID (Network)</td>
            <td>Download Mbps</td>
          </tr>
        </thead>
        <% @cafe.test_results.find(:all, :order => "created_at desc").each do |result| %>
        <tr>
          <td><%= time_ago_in_words result.created_at %> ago</td>
          <td><%= result.ssid %></td>
          <td><%= number_with_precision result.download_mbps, :precision => 2 %></td>
        </tr>
        <% end %>
      </table>

    </div>
  </div><!-- /content -->

</div><!-- /page -->
